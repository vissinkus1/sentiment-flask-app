<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Sentiment Analysis Web App</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <!-- Header -->
        <div class="card text-center mb-4 shadow bg-gradient-primary text-white">
            <div class="card-body">
                <h1 class="display-5 fw-bold">AI Sentiment Analysis</h1>
                <p class="lead">Instantly detect sentiment in text using NLP (BERT/VADER/TextBlob). Try single or batch mode below!</p>
            </div>
        </div>
        <!-- Description/Blog Section -->
        <div class="mb-4">
            <h3>About This Project</h3>
            <p>
                This web app demonstrates three powerful approaches for sentiment analysis: deep learning (BERT), rule-based (VADER), and statistical (TextBlob). You can analyze movie reviews, product opinions, tweets, and more. 
                <br><br>
                <strong>How It Works:</strong> Enter text or upload a CSV, choose the model, and see instant predictions. 
                <br><br>
                <strong>Blog:</strong> <br>
                Sentiment analysis is a core NLP technique. <a href="https://journalofbigdata.springeropen.com/articles/10.1186/s40537-023-00781-w" target="_blank">Read more</a> about how transformers and rule-based methods power modern solutions.
            </p>
        </div>
        <!-- Single Text Analysis -->
        <div class="card mb-4 shadow">
            <div class="card-header bg-info text-white">Single Sentence Sentiment Analysis</div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-8">
                        <input type="text" class="form-control mb-2" id="singleText" placeholder="Enter a sentence...">
                    </div>
                    <div class="col-md-4">
                        <select class="form-select mb-2" id="singleModel">
                            <option value="bert">BERT</option>
                            <option value="vader">VADER</option>
                            <option value="textblob">TextBlob</option>
                        </select>
                    </div>
                </div>
                <button class="btn btn-success" onclick="analyzeSingle()">Analyze</button>
                <div id="singleResult" class="mt-3"></div>
            </div>
        </div>
        <!-- Batch CSV Upload -->
        <div class="card mb-4 shadow">
            <div class="card-header bg-info text-white">Batch Sentiment Analysis (CSV Upload)</div>
            <div class="card-body">
                <form id="batchForm">
                    <div class="row mb-2">
                        <div class="col-md-9">
                            <input type="file" id="csvFile" accept=".csv" class="form-control">
                        </div>
                        <div class="col-md-3">
                            <select class="form-select" id="batchModel">
                                <option value="bert">BERT</option>
                                <option value="vader">VADER</option>
                                <option value="textblob">TextBlob</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="analyzeBatch(event)">Analyze Batch</button>
                </form>
                <div id="batchResult" class="mt-3"></div>
            </div>
        </div>
        <!-- Footer/Blog Links -->
        <div class="text-center my-4">
            <span class="text-muted">Made by Vishal - <a href="https://github.com/vissinkus1"
 target="_blank">GitHub</a></span><br>
            <span class="text-muted">Learn more about <a href="https://www.geeksforgeeks.org/nlp/sentiment-classification-using-bert/" target="_blank">BERT for sentiment analysis</a>.</span>
        </div>
    </div>
    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
    function analyzeSingle() {
        const text = $('#singleText').val();
        const model = $('#singleModel').val();
        $('#singleResult').html('<span class="text-info">Analyzing...</span>');
        $.ajax({
            url: "/predict_ui",
            type: "POST",
            contentType: "application/json",
            data: JSON.stringify({text: text, model: model}),
            success: function(result) {
                $('#singleResult').html(
                    `<b>Model:</b> ${result.model}<br>
                     <b>Sentiment:</b> <span class="fw-bold text-${result.sentiment=='positive'?'success':(result.sentiment=='negative'?'danger':'warning')}">${result.sentiment}</span>`
                );
            },
            error: function(err) {
                $('#singleResult').html('<span class="text-danger">Error: Could not analyze text.</span>');
            }
        });
    }
    function analyzeBatch(e) {
        e.preventDefault();
        $('#batchResult').html('<span class="text-info">Analyzing...</span>');
        var formData = new FormData();
        formData.append("file", $('#csvFile')[0].files[0]);
        formData.append("model", $('#batchModel').val());
        $.ajax({
            url: "/batch_predict_ui",
            type: "POST",
            data: formData,
            contentType: false,
            processData: false,
            success: function(data) {
                let html = "<b>Results:</b><br><table class='table table-bordered'><thead><tr><th>Text</th><th>Sentiment</th></tr></thead><tbody>";
                for (let row of data) {
                    html += `<tr><td>${row.text}</td><td>${row.sentiment}</td></tr>`;
                }
                html += "</tbody></table>";
                $('#batchResult').html(html);
            },
            error: function() {
                $('#batchResult').html('<span class="text-danger">Error: Could not process batch CSV.</span>');
            }
        });
    }
    </script>
</body>
</html>
